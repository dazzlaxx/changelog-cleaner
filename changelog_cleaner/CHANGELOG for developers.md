## 1.17 - 2025-08-14
1) Добавлена возможность онлайн загрузки при изменении текста программы и/или констант
   (требуется версия Unimod PRO 2 2.3.40-rc231)
2) Добавлено выставление флага наличия динамических ошибок на Диагностической плате
   (system(44,7))
3) Добавлен вывод информации о загрузке ЦП, ОЗУ, ПЗУ
   (в окне Диагностика и с помощью ФБ GET_PLC_INFO_BIN)
4) Добавлена возможность форсирования значений переменных:
   - При переходе в режим Отладка стал доступен пункт "Заблокировать переменную";
   - После активации переменную можно изменить только через Отладчик или SCADA, но не из
     проекта

!!!!! Временно отключено
5) Добавлен механизм прерывания бесконечных перезагрузок:
   - Если мастер-модуль после загрузки по питанию или загрузке нового проекта работает менее
     10 секунд и перезагружается, то после 5 таких перезагрузок подряд мастер-модуль
     переходит в состояние "Остановлен" с ожиданием действий оператора

6) Обновление ОС:
   - На версии 1.15 обновление ОС могло занимать продолжительное время
7) OPC UA сервер мог не запускаться
8) Добавлен ФБ AGA8_92
9) Добавлена возможность установки нескольких IP-адресов для каждого интерфейса
10) Добавлена поддержка нескольких Ethernet шлюзов/маршрутов
11) При подключении к мастер-модулю могло отображаться окно "Информация о мастер-модуле:",
    в котором после двоеточия выводился мусор
12) При удаленной перезагрузке IP-адрес в Журнале событий отображался в обратном порядке
1.17.0.8
13) #2482 Добавлены функциональные блоки:
   ai, ai_di, ai_fz, ai_nak, di, do, im, im_imp, kc_di_ai, kc_di_di, kc_do_ai, kc_do_di, 
   nar_h, nar_n, paz,  reg,  reg_a,  reg_do,  reg_f,  t_time,  zero,  ai_rs_stm, ai_stm,
   im_stm, tsyncdualsource, tsyncsinglesource, settime, drv_gettime

## 1.17.0.9
13) Отключен механизм бесконечных перезагрузок:
    С включенным механизмом причина перезагрузки мастер-модуля некорректно складывается в лог
14) Некорректно проверялась корректность маски подсети (на последовательность нулей и единиц)
    (После добавления возможности задания нескольких IP)
    Проявилось при задании маски /25
===
- um_ker запускал скрипт, а затем убивал um_opcua вместе с остальными задачи, чтобы запустить
  только используемые в проекте
- Добавлена возможность собрать отладочную версию с внесением ошибки в счетчик
  последовательности пакетов ST-BUS


## 1.15 - 2025-07-05
1) Обновление ОС:
   - Мог перезагружаться при попытке прошивки с ОС 2.0 на 2.1 (и новее)
2) Модули DR:
   - Работа с модулями DR велась некорректно, Архивация событий не выполнялась
3) "Белый список" сетевых подключений:
   - Мастер-модуль отбрасывал ответы-подтверждения от syslog-сервера при подключении по TCP
   - Стал распространяться на абонентов Межконтроллерного обмена
4) Журнал событий:
   - Не складывалось сообщение об успешности прошивки исполнительной системы
5) Чтение MAC адресов:
   - На версиях 1.13-1.14 при чтении происходила перезагрузка
6) Modbus-RTU. Режим четности:
   - Если настройки Modbus задаются через вкладку "Внешние коммуникации", то режимы четности
     выставлялись некорректно
7) Удаленная перезагрузка:
   - Добавлена возможность удаленной перезагрузки ПЛК с помощью Среды разработки
     (соответствующая кнопка в режиме "Диагностика")
===
BACnet stack теперь подключается как подмодуль
Влиты правки для виртуального ПЛК:
 - Выведена информация о ключе
 - Работа с ключом вынесена в отдельный поток
 - Добавлена работа МКО с физическим мастер-модулем (ранее работал только с виртуальным)
Обновление прошивки:
 - Устранена утечка памяти
 - Изменены пути к файлу-индикатору успешности прошивки
*5) Перезагрузка происходила при запросе MAC для несуществующих интерфейсов

## 1.14.1 - 2025-05-29
1) МЭК-104: В некоторых ситуациях, связанных с ошибками по Ethernet (проявилось
   также при сканировании портов), обмен по МЭК-104 мог пропадать (если при этом
   в проекте выполняется синхронизация времени от клиента МЭК-104, то приводило
   к перезагрузке)

## 1.14 - 2025-05-22
1) Syslog: Добавлено сообщение об изменении md5 проекта
2) Белые списки: В правила добавлены номер порта и протокол
3) Добавлен ФБ GET_CRC_FB для получения CRC32 пользовательских ФБ

## 0.13.1 - 2025-05-03
1) OPC UA: Версия с сертификатами, для защищенной авторизации
   (политика Basic256Sha256, пользователи пока задаются жестко: UserRead/userread,
   UserWrite/userwrite, библиотеки все в составе Исполнительной системы)

## 1.13 - 2025-04-30
1) OPC UA: Скомпилировано без необходимости ssl-библиотек, но с текущим umdefs.h

## 1.12.5 - 2025-04-26
1) Добавлена возможность обновления образа ОС с версии ОС 2.0 на более новую
2) OPC UA: Вывод всех сообщений перенаправлен в /dev/null

## 1.12.4 - 2025-04-26
1) МЭК-104: После перемещения полей структуры ради соответствия сборке OPC UA (см. 1.12.2)
   перестали корректно выставляться флаги запрета отката времени назад и признака источника
   синхронизации

## 1.12.3 - 2025-04-21
1) OPC UA сервер: Возникла путаница в заголовочных файлах, с которыми был скомпилирован
   OPC UA сервер. Для M101E - как из версии 1.12.1, а для M501E - как из версии 1.12.2.
   Теперь сервер для всех скомпилирован с одинаковым umdefs.h из версии 1.12.2.

## 1.12.2 - 2025-04-19
1) OPC UA сервер: заголовочные файлы приведены в соответствие тем, с которыми якобы
   компилировался OPC UA

## 1.12.1 - 2025-04-18
1) BACnet: Добавлена возможность задания IP-порта
2) Рефакторинг кода (с целью универсальности для разных платформ)
3) Переменные с меткой "Архивация":
   - Отладка нового механизма вычитывания Архивируемых переменных с помощью
     Альфа Платформа ТРЭИ (см. версию 1.10)

## 1.11.2 - 2025-04-13
1) BACnet: Добавлена поддержка, в режиме клиент
2) OPC UA: Добавлена поддержка, в режиме сервер
3) Добавлена поддержка ОС версии 2.0 (и новее).
   Примечание: Совместимость с версиями 1.x сохранена

## 1.11.1 - 2025-04-06
1) Добавлен ФБ SOCK_OPEN
2) Добавлен ФБ GET_PLC_INFO_TXT
3) System(19) с кодами 3-6 стал возвращать актуальную информацию (возвращал нули)

## 1.11 - 2025-03-31
1) Передача сообщений на syslog-сервер:
   - Сообщениям присваивались метки времени, не соответствующие отображаемому на контроллере
     времени
   - Добавлено сообщение с информацией о подключившемся (из Среды разработки) пользователе

## 1.10 - 2025-03-25
1) Добавлена поддержка "белых" IP_адресов для подключения к контроллеру (требуется ОС версии 1.8)
2) Добавлена возможность передачи сообщений Журнала событий мастер-модуля на Syslog сервер
   (требуется ОС версии 1.8)
3) Переменные с меткой "Архивация":
   - Изменен протокол вычитывания Архивируемых переменных с помощью Альфа Платформа ТРЭИ,
     для исключения потенциальных повторных вычитываний старых значений при переводах
     времени назад (требуется обновленная версия Альфа Платформа ТРЭИ)
4) Поведение функций ROL/ROR/SHL/SHR приведено к поведению как в Unimod PRO 1 (обработка
   целочисленного значения как беззнакового)
5) МЭК-104 и system(61)/(62)
   При следующей последовательности:
   1) Для переменной МЭК-104 задана спорадическая передача, но не установлена Архивация
   2) Вызов system(61,1) ("заморозка времени при переводе назад")
   3) Перевод часов назад
   4) Вызов system(62)
   В этом случае после перевода часов пока время в пакетах МЭК-104 не "разморозится" (часы
   не догонят время до заморозки) system(62) не приводил к изменению флага передаваемого по
   МЭК-104
6) Добавлена поддержка FL_SPOS
7) Некорректно работали функции сравнения строк (между собой и в условиях больше/меньше/равно)
   и конверсии строк в другие типы
8) Снхронизация времени:
   - При попытке синхронизации от МЭК-104 ФБ TIME_SYNC и TIME_FROM_SERVER возвращали ошибку
   - ФБ TIME_FROM_SERVER: Устанавливал время в системе без вызова ФБ TIME_SET
   - В лог добавлены сообщения о переводе часов из проекта

## 1.9 - 2025-01-26
1) Добавлена поддержка переменных с атрибутом "Качество" (технологическое), доступным для
   записи из программ пользователя (качество добавлено для типов булевский, целый,
   вещественный, байт, вещ. двойной точности).
   Если для переменной выставлен атрибут "Архивация", то запись в архив выполняется как при
   изменения значения, так и при изменении атрибута "Качество"
2) Скорректированы проверки на корректность задания IP-адресов.
   В том числе:
   - Соответствие общим правилам задания IP-адресов и масок подсети
   - Скорректированы проверки, находятся ли IP-адреса разных интерфейсов в одной подсети
     (были ложные срабатывания, когда, например, у одних интерфейсов маска 255.255.255.0,
      а у других - отличная от нее)
3) GETAR/SETAR:
   - Если CNT больше 4, стала выдаваться ошибка 1 (раньше игнорировалось и некорректно
     выполнялось)
   - Если задан SEQ, но CNT равен 1, то стала выдаваться ошибка 3 (раньше игнорировалось и
     некорректно выполнялось)
4) FL_WR:
   - Запись строк стала возможна и в бинарном, и в текстовом режиме работы с файлом
     (см. FL_OPEN)
     В бинарном режиме после строки дописывается ноль-символ, в текстовом - только сама
     строка
5) Если в коде используются константы "Вещественное двойной точности", но при этом в словаре
   нет переменных с начальным значением или флагом "Хранить/Резерв.", то операции с
   данными константами выполнялись как с имеющими нулевое значение
6) МЭК-104:
   - Добавлен system(61, 1):
     - Включает режим, при котором: Если при синхронизации времени происходит корректировка
       системного времени «назад», меткам времени для данных, передаваемых клиенту,
       присваивается значение метки времени тега, переданное клиенту до момента перевода
       часов, пока ход системного времени не компенсирует разницу времени, на которое оно
       было скорректировано.
   - Добавлен system(62):
     - Аргумент (0/1), передаваемый на вход system, транслируется в признак "RES 1" метки
       времени для данных, передаваемых клиенту
   - Если в проекте группа объявлена, но переменные в нее не добавлены, формировался
     некорректный заголовок (некоторые клиенты это игнорировали, для них на обмен
     влияния не оказывало)

## 1.8 - 2024-04-20
1) ST-BUS:
   - Если установлен модуль не того типа, то флаги ошибки ST-BUS в окне Диагностики и
     вызовах system(44) не выставлялись, светодиод светился зеленым (ошибка отображалась
     только в структуре control (not_valid и err_cfg) и в Журнале событий)
   - В первом цикле были возможно ошибки обмена с одним или несколькими модулями
2) Обновление ИС:
   - При некотором стечении обстоятельств обновление не выполнялось (также, могли частично
     портиться файлы исполнительной системы, из-за чего мастер переставал запускаться)
3) System(35):
   Если с помощью system(35) происходило обращение к модулю, отсутствующему в проекте,
   мастер-модуль перезагрузагружался по Watchdog
4) МКО (актуально для версий 1.5-1.7):
   - При больших циклах мастера начинались таймауты по задачам МКО
5) Перевод времени/Синхронизация:
   - При переводе времени или синхронизации от NTP-сервера, наблюдались скачки цикла до 130мс
6) Modbus Slave:
   - Если происходит обращение к области Modbus-ячеек/регистров, а на мастере данная область
     пуста (не назначены Modbus-адреса для данной области (Coils/Contacts/Input/Holding
     registers)), то обмен по Modbus Slave со всеми клиентами останавливался до перезагрузки
     мастера
7) Окно Диагностика:
   - Время мастер-модулей выводилось равным UTC+0. Теперь выводится с учетом часового пояса

## 1.7 - 2024-03-15
1) Расширена информация, отображаемая в окне Диагностики
2) Скорректирована обработка команд, в которых есть проверка на некорректность входов
   (Деление/ASIN/ACOS/ASCII/LOG/POW/EXPT/SQRT/MOD/RAND/ROL/ROR/GETBIT/GETBYTE/SETBIT/SETBYTE/).
   При некорректных значениях на входе выходное значение не формировалось (срабатывала только
   проверка корректности исходных данных)
3) Скорректированы функции:
   - ASCII. Не читался последний символ в строке
   - ATAN: на вход можно было подать значение только в диапазоне -1..1
   - CRC. Выход FAULT не сбрасывался
   - FIND. При подаче на вход PAT пустой строки стал возвращаться 0
   - FL_GPOS: Выход FAULT не обнулялся
   - INT_TO_BIT. Если IN не равен нулю, то все выходы выставлялись в TRUE
   - LEFT. Возвращала пустую строку, если LEN больше размера строки
   - MUXD4/MUXD8. Не выполнялись, формировалась динамическая ошибка приложения
     (сообщение в статистики - "Некорректное выполнение кода")
   - PSET. Переделано на работу с двумерным массивом
   - REPLACE. Вход POS работал некорректно
   - RIGHT. Возвращала пустую строку, если LEN больше размера строки
4) При обновлении проекта были возможны перезагрузки (если проект объемный и время на
   инициализацию превышало время Watchdog)

## 1.6 - 2024-01-24
1) Функция BIT_TO_INT: на выходе Q заполнялся только младший байт
2) В режиме "Независимые порты" при широковещательном ARP запросе отвечали оба интерфейса
   (т.е. каждый интерфейс сообщал о том, что указанный IP-адрес присутствует на
   мастер-модуле, даже если запрашиваемый IP-адрес на соседнем интерфейсе). Если при этом
   сети не изолированы, то на другой стороне это выглядело как 2 ARP-ответа мастера с одним
   IP-адресом (каждый интерфейс отвечал со своим MAC адресом). Обмен при этом выполнялся,
   но, во избежание путаницы на удаленных устройствах, теперь на ARP запрос отвечает только
   тот сетевой интерфейс, который находится в одной подсети с IP-адресом из ARP-запроса

## 1.5 - 2023-12-09
1) ФБ MB_R / MB_R_AR / MB_W / MB_W_AR:
   - Более корректные проверки на превышение входа Number (кол-во переменных) (можно было
     задать больше допустимого)
2) ФБ MB_R_AR / MB_W_AR:
   - Исправлена некорректная работа, если ФБ располагается внутри структуры
3) ФБ MB_* + M172S:
   - Часть кодов ошибок (в т.ч. таймаут по линии) выставлялись только на один цикл, вместе с
     READY. Теперь выход FAULT между циклами в ноль не сбрасывается
   - При ручной записи параметров из проекта обмен с M172S мог останавливаться
4) Modbus Slave при инициализации с помощью MB_RTU_SLV / MB_TCP_SLV:
   - Чтение переменных "Вещественное двойной точности" не выполнялось
5) ФБ FL_OPEN:
   - Если файл отсутствует, то после создания с помощью ФБ его нельзя было вычитать по FTP
6) system(18):
   - Коды 20-22 стали возвращать время цикла без простоя (используется при выставлении
     фиксированного цикла для оценки загруженности мастер-модуля)

## 1.4 - 2023-11-11
1) Архивация:
   - Для функции HDA_WRITE_VAR добавлена поддержка переменных с типами "Вещественное", "Байт"
     и "Вещественное двойной точности"
2) MB_W / MB_W_AR / Modbus-Master на вкладке "Внешние коммуникации":
   - Запрос на запись переменных с типом "Вещественное двойной точности" мог формироваться
     некорректно

## 1.3 - 2023-10-14
1) Добавлена поддержка настройки "Сетевой шлюз"
2) Добавлен ФБ MR_113_V2
3) Если проект отсутствует или не запускается в работу из-за критической ошибки, опрос
   модулей Средой разработки в режиме "Диагностика" не выполнялся
4) Статистика:
   - Более корректные сообщения о подключении/отключении абонентов UNET

## 1.2 - 2023-09-11
1) M101E + M172S:
   - После перезагрузок/прошивок M172S обмен по Modbus мог останавливаться до перезагрузки
     M101E
   - Если M172S имеет состояние не "В работе" (например происходит обновление прошивки),
     блоки Modbus стали сразу возвращать ошибку (аналогичное поведение в диагностических
     структурах для Modbus-запросов вкладки "Внешние коммуникации")

## 1.1 - 2023-09-02
1) Исправлено: Циклическая перезагрузка, если:
   - при подаче питания проект отсутствует
   - при подаче питания проект не запускается в работу из-за наличия ошибок в проекте
2) Задачи Межконтролерного обмена с атрибутом "Вход" работали только в режиме "Независимые порты"
3) Добавлена поддержка system(34), system(55)
4) Добавлена фиксация в статистике, если часы переводят из проекта (ФБ DRV_SYNCTIME\SETTIME\SETTIME_)
   (была фиксация только при команде из UMDiag; перевод менее чем на 10 секунд не фиксируется)
5) Если проект не загружен или проект не запускается в работу из-за наличия ошибок в проекте,
   опрос модулей из Среды разработки (вкладка "Диагностика") не выполнялся
6) Modbus Slave:
   - При чтении/записи переменных с типом "Байт" применялись алгоритмы перестановки байт как для
     целых (теперь перестановка байт не выполняется).
   - При чтении/записи переменных с типом "Байт" применялись алгоритмы как для целых
     переменных касаемо 16/32 разрядных режимов адресации

## 1.0 - 2023-08-04
Release
